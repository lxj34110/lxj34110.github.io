<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport"content="width=device-width, initial-scale=1.0"><title>txt在线阅读工具</title><link rel="stylesheet"href="../css/book-detail.css"></head><body><script src="../js/user-auth.js"></script><script src="../js/indexeddb-helper.js"></script><script>document.addEventListener('DOMContentLoaded',function(){if(!window.auth||!window.auth.isLoggedIn()){window.location.href='login.html'}});</script><h2><!--<a href="book-shelf.html"class="book-shelf">书架</a>--><label id="txtTitle">在线阅读工具</label></h2><!--书架按钮--><a href="book-shelf.html"class="toggle-btn"alt="书架">▦</a><!--显示目录--><button id="toggleChapters"class="toggle-btn"alt="显示目录">▤</button><!--上一章--><button id="prevChapter"class="toggle-btn"alt="上一章">☜</button><!--下一章--><button id="nextChapter"class="toggle-btn"alt="下一章">☞</button><!--设置按钮--><button id="settingsToggle"class="toggle-btn"alt="设置">⚙</button><!--编辑章节按钮--><button id="editChapter"class="toggle-btn"alt="编辑章节">✎</button><div id="editControls"style="display: none; margin-top: 10px;"><!--保存修改--><button id="saveChapterEdit"class="toggle-btn"alt="保存修改">✔</button><!--取消编辑--><button id="cancelChapterEdit"class="toggle-btn"alt="取消编辑">✖</button><!--保存到indexdb--><button id="saveIndexdbEdit"class="toggle-btn"alt="保存到indexdb">☑</button><!--在不影响现有功能逻辑的基础上，在详情页的编辑状态下，为如下按钮新增代码逻辑，增加撤销新增的字符和反撤销功能--><button id="recallEdit"class="toggle-btn"alt="撤销文字">☾</button><button id="recoverEdit"class="toggle-btn"alt="恢复文字">☽</button></div><!--背景遮罩--><div id="settingsOverlay"class="settings-overlay"style="display: none;"><!--设置面板--><div class="settings-panel"><div class="settings-header"><h3>阅读设置</h3><button id="closeSettings"class="close-btn">×</button></div><div class="settings-content"><div class="setting-group"><label for="theme">皮肤：</label><select id="theme"><option value="light">白天</option><option value="dark">黑夜</option><option value="eyeCare">护眼</option></select></div><div class="setting-group"><label for="fontSize">文字大小：</label><select id="fontSize"><option value="0.875rem">小</option><option value="1rem">标准</option><option value="1.125rem">中等</option><option value="1.25rem">大</option><option value="1.5rem">超大</option></select></div><div class="setting-group"><label for="lineHeight">行间距：</label><select id="lineHeight"><option value="1.2">紧凑</option><option value="1.4">标准</option><option value="1.6">舒适</option><option value="1.8">宽松</option><option value="2">非常宽松</option></select></div></div><div class="settings-footer"><button id="saveSettings"class="save-btn">保存</button><button id="cancelSettings"class="cancel-btn">取消</button></div></div></div><!--<input type="file"id="fileInput"accept=".txt">--><div class="container"><div class="chapter-list"id="chapterList"style="display: none;"></div><div class="content"id="content"contenteditable="false"></div><span id="chapterWordCount"></span><div id="editStatus">编辑模式</div></div><div id="chapterButtons"class="chapter-buttons"style="display: none;"><button id="prevChapterBottom">上一章</button><button id="nextChapterBottom">下一章</button></div><script src="../js/settings-handler.js"></script><script src="../js/edit-handler.js"></script><script src="../js/reader-functions.js"></script><script src="../js/book-detail.js"></script><script>document.addEventListener('DOMContentLoaded',function(){if(window.initSettings){window.initSettings()}const settingsToggle=document.getElementById('settingsToggle');const settingsOverlay=document.getElementById('settingsOverlay');const closeSettings=document.getElementById('closeSettings');const cancelSettings=document.getElementById('cancelSettings');const saveSettingsBtn=document.getElementById('saveSettings');const lineHeightSelect=document.getElementById('lineHeight');const fontSizeSelect=document.getElementById('fontSize');const themeSelect=document.getElementById('theme');function showSettings(){settingsOverlay.style.display='flex'}function hideSettings(){settingsOverlay.style.display='none'}function handleSaveSettings(){const settings={lineHeight:lineHeightSelect.value,fontSize:fontSizeSelect.value,theme:themeSelect.value};if(window.saveSettings){window.saveSettings(settings);hideSettings()}else{console.error('saveSettings函数不存在')}}if(settingsToggle){settingsToggle.addEventListener('click',showSettings)}if(closeSettings){closeSettings.addEventListener('click',hideSettings)}if(cancelSettings){cancelSettings.addEventListener('click',hideSettings)}if(saveSettingsBtn){saveSettingsBtn.addEventListener('click',handleSaveSettings)}if(settingsOverlay){settingsOverlay.addEventListener('click',function(event){if(event.target===settingsOverlay){hideSettings()}})}});</script></body></html>
