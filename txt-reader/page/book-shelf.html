<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport"content="width=device-width, initial-scale=1.0"><title>书架</title><link rel="stylesheet"href="../css/book-shelf.css"></head><body><script src="../js/indexeddb-helper.js"></script><script src="../js/settings-handler.js"></script><script src="../js/user-auth.js"></script><script>document.addEventListener('DOMContentLoaded',function(){if(!window.auth||!window.auth.isLoggedIn()){window.location.href='login.html'}else{if(window.initSettings){initSettings()}}});</script><h1>书架<!--设置按钮--><button id="settingsToggle"><svg xmlns="http://www.w3.org/2000/svg"width="16"height="16"fill="currentColor"class="bi bi-gear-fill"viewBox="0 0 16 16"><path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.767-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/></svg></button></h1><div class="book-tool"><input type="file"id="fileInput"accept=".txt,.markdown"multiple><!--添加书籍--><label class="toggle-btn"for="fileInput"><!--⊕--><svg xmlns="http://www.w3.org/2000/svg"width="16"height="16"fill="currentColor"class="bi bi-patch-plus"viewBox="0 0 16 16"><path fill-rule="evenodd"d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5"/><path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z"/></svg></label><!--草稿--><button id="draftBtn"class="toggle-btn"><svg xmlns="http://www.w3.org/2000/svg"width="16"height="16"fill="currentColor"class="bi bi-journal-bookmark-fill"viewBox="0 0 16 16"><path fill-rule="evenodd"d="M6 1h6v7a.5.5 0 0 1-.757.429L9 7.083 6.757 8.43A.5.5 0 0 1 6 8z"/><path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2"/><path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z"/></svg></button><!--编辑选中--><!--<button id="editSelected"class="toggle-btn">✍</button>--><!--批量全选--><button id="allSelected"class="toggle-btn">☑</button><!--删除选中--><button id="deleteSelected"class="toggle-btn"><!--〄--><svg xmlns="http://www.w3.org/2000/svg"width="16"height="16"fill="currentColor"class="bi bi-patch-minus"viewBox="0 0 16 16"><path fill-rule="evenodd"d="M5.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5"/><path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z"/></svg></button><!--[阅读]和[草稿]模式切换标识--><button id="toggleBookType"class="toggle-btn"><svg xmlns="http://www.w3.org/2000/svg"width="16"height="16"fill="currentColor"class="bi bi-radioactive"viewBox="0 0 16 16"><path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8"/><path d="M9.653 5.496A3 3 0 0 0 8 5c-.61 0-1.179.183-1.653.496L4.694 2.992A5.97 5.97 0 0 1 8 2c1.222 0 2.358.365 3.306.992zm1.342 2.324a3 3 0 0 1-.884 2.312 3 3 0 0 1-.769.552l1.342 2.683c.57-.286 1.09-.66 1.538-1.103a6 6 0 0 0 1.767-4.624zm-5.679 5.548 1.342-2.684A3 3 0 0 1 5.005 7.82l-2.994-.18a6 6 0 0 0 3.306 5.728ZM10 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0"/></svg></button></div><!--设置面板--><div id="settingsOverlay"class="settings-overlay"style="display: none;"><div class="settings-panel"><h2>设置</h2><div class="settings-group"><label for="theme">主题皮肤：</label><select id="theme"><option value="light">白天</option><option value="dark">黑夜</option><option value="eye-care">护眼</option></select></div><div class="settings-group"><label for="fontSize">字体大小：</label><select id="fontSize"><option value="0.875rem">小</option><option value="1rem">标准</option><option value="1.125rem">中等</option><option value="1.25rem">大</option><option value="1.5rem">超大</option></select></div><div class="settings-group"><label for="lineHeight">行间距：</label><select id="lineHeight"><option value="1.2">紧凑</option><option value="1.4">标准</option><option value="1.6">舒适</option><option value="1.8">宽松</option><option value="2">非常宽松</option></select></div><div class="settings-actions"><button id="saveSettings"class="btn-save">保存</button><button id="closeSettings"class="btn-close">关闭</button></div></div></div><div class="container"><div class="book-list"id="bookList"></div></div><script src="../js/book-shelf.js"></script><script>document.addEventListener('DOMContentLoaded',function(){const settingsToggle=document.getElementById('settingsToggle');const settingsOverlay=document.getElementById('settingsOverlay');const closeSettings=document.getElementById('closeSettings');const saveSettings=document.getElementById('saveSettings');const themeSelect=document.getElementById('theme');const fontSizeSelect=document.getElementById('fontSize');const lineHeightSelect=document.getElementById('lineHeight');if(settingsToggle&&settingsOverlay){settingsToggle.addEventListener('click',function(){settingsOverlay.style.display='flex'});if(closeSettings){closeSettings.addEventListener('click',function(){settingsOverlay.style.display='none'})}settingsOverlay.addEventListener('click',function(e){if(e.target===settingsOverlay){settingsOverlay.style.display='none'}})}if(saveSettings&&themeSelect&&fontSizeSelect&&lineHeightSelect&&window.saveSettings){saveSettings.addEventListener('click',function(){const settings={theme:themeSelect.value,fontSize:fontSizeSelect.value,lineHeight:lineHeightSelect.value};window.saveSettings(settings);settingsOverlay.style.display='none'})}});</script></body></html>
