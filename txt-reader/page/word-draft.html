<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport"content="width=device-width, initial-scale=1.0"><title>草稿编辑器</title><link rel="stylesheet"href="../css/word-draft.css"></head><body><h2><label id="draftTitle">草稿编辑器</label><!--设置按钮--><button id="settingsToggle"class="toggle-btn"><svg xmlns="http://www.w3.org/2000/svg"width="16"height="16"fill="currentColor"class="bi bi-gear-fill"viewBox="0 0 16 16"><path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.767-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/></svg></button></h2><div class="button-group"><a href="book-shelf.html"class="toggle-btn"alt="书架"><svg xmlns="http://www.w3.org/2000/svg"width="16"height="16"fill="currentColor"class="bi bi-bricks"viewBox="0 0 16 16"><path d="M0 .5A.5.5 0 0 1 .5 0h15a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H14v2h1.5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H14v2h1.5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5H2v-2H.5a.5.5 0 0 1-.5-.5v-3A.5.5 0 0 1 .5 6H2V4H.5a.5.5 0 0 1-.5-.5zM3 4v2h4.5V4zm5.5 0v2H13V4zM3 10v2h4.5v-2zm5.5 0v2H13v-2zM1 1v2h3.5V1zm4.5 0v2h5V1zm6 0v2H15V1zM1 7v2h3.5V7zm4.5 0v2h5V7zm6 0v2H15V7zM1 13v2h3.5v-2zm4.5 0v2h5v-2zm6 0v2H15v-2z"/></svg></a><!--保存--><button id="saveBtn"><svg xmlns="http://www.w3.org/2000/svg"width="16"height="16"fill="currentColor"class="bi bi-floppy-fill"viewBox="0 0 16 16"><path d="M0 1.5A1.5 1.5 0 0 1 1.5 0H3v5.5A1.5 1.5 0 0 0 4.5 7h7A1.5 1.5 0 0 0 13 5.5V0h.086a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5H14v-5.5A1.5 1.5 0 0 0 12.5 9h-9A1.5 1.5 0 0 0 2 10.5V16h-.5A1.5 1.5 0 0 1 0 14.5z"/><path d="M3 16h10v-5.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9-16H4v5.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5zM9 1h2v4H9z"/></svg></button><!--加载--><button id="loadBtn"><svg xmlns="http://www.w3.org/2000/svg"width="16"height="16"fill="currentColor"class="bi bi-cloud-download-fill"viewBox="0 0 16 16"><path fill-rule="evenodd"d="M8 0a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 4.095 0 5.555 0 7.318 0 9.366 1.708 11 3.781 11H7.5V5.5a.5.5 0 0 1 1 0V11h4.188C14.502 11 16 9.57 16 7.773c0-1.636-1.242-2.969-2.834-3.194C12.923 1.999 10.69 0 8 0m-.354 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V11h-1v3.293l-2.146-2.147a.5.5 0 0 0-.708.708z"/></svg></button><!--下载--><button id="downBtn"><svg xmlns="http://www.w3.org/2000/svg"width="16"height="16"fill="currentColor"class="bi bi-arrow-down-square-fill"viewBox="0 0 16 16"><path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm6.5 4.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5a.5.5 0 0 1 1 0"/></svg></button><!--检查数据库--><button id="checkDB"><svg xmlns="http://www.w3.org/2000/svg"width="16"height="16"fill="currentColor"class="bi bi-database-fill-gear"viewBox="0 0 16 16"><path d="M8 1c-1.573 0-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4s.875 1.755 1.904 2.223C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777C13.125 5.755 14 5.007 14 4s-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1"/><path d="M2 7v-.839c.457.432 1.004.751 1.49.972C4.722 7.693 6.318 8 8 8s3.278-.307 4.51-.867c.486-.22 1.033-.54 1.49-.972V7c0 .424-.155.802-.411 1.133a4.51 4.51 0 0 0-4.815 1.843A12 12 0 0 1 8 10c-1.573 0-3.022-.289-4.096-.777C2.875 8.755 2 8.007 2 7m6.257 3.998L8 11c-1.682 0-3.278-.307-4.51-.867-.486-.22-1.033-.54-1.49-.972V10c0 1.007.875 1.755 1.904 2.223C4.978 12.711 6.427 13 8 13h.027a4.55 4.55 0 0 1 .23-2.002m-.002 3L8 14c-1.682 0-3.278-.307-4.51-.867-.486-.22-1.033-.54-1.49-.972V13c0 1.007.875 1.755 1.904 2.223C4.978 15.711 6.427 16 8 16c.536 0 1.058-.034 1.555-.097a4.5 4.5 0 0 1-1.3-1.905m3.631-4.538c.18-.613 1.048-.613 1.229 0l.043.148a.64.64 0 0 0 .921.382l.136-.074c.561-.306 1.175.308.87.869l-.075.136a.64.64 0 0 0 .382.92l.149.045c.612.18.612 1.048 0 1.229l-.15.043a.64.64 0 0 0-.38.921l.074.136c.305.561-.309 1.175-.87.87l-.136-.075a.64.64 0 0 0-.92.382l-.045.149c-.18.612-1.048.612-1.229 0l-.043-.15a.64.64 0 0 0-.921-.38l-.136.074c-.561.305-1.175-.309-.87-.87l.075-.136a.64.64 0 0 0-.382-.92l-.148-.045c-.613-.18-.613-1.048 0-1.229l.148-.043a.64.64 0 0 0 .382-.921l-.074-.136c-.306-.561.308-1.175.869-.87l.136.075a.64.64 0 0 0 .92-.382zM14 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/></svg></button></div><!--背景遮罩--><div id="settingsOverlay"style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000;"></div><!--设置面板--><div class="settings"style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 8px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 1001; flex-direction: column; gap: 15px; min-width: 300px;"><h3 style="margin: 0 0 15px 0; text-align: center;">设置</h3><div style="display: flex; justify-content: space-between; align-items: center;"><label for="theme">主题皮肤：</label><select id="theme"style="padding: 8px; border-radius: 4px; border: 1px solid #ddd;width: 100px;"><option value="light">白天</option><option value="dark">黑夜</option><option value="eye-care">护眼</option></select></div><div style="display: flex; justify-content: space-between; align-items: center;"><label for="fontSize">字体大小：</label><select id="fontSize"style="padding: 8px; border-radius: 4px; border: 1px solid #ddd;width: 100px;"><option value="0.875rem">小</option><option value="1rem">标准</option><option value="1.125rem">中等</option><option value="1.25rem">大</option><option value="1.5rem">超大</option></select></div><div style="display: flex; justify-content: space-between; align-items: center;"><label for="lineHeight">行间距：</label><select id="lineHeight"style="padding: 8px; border-radius: 4px; border: 1px solid #ddd;width: 100px;"><option value="1.2">紧凑</option><option value="1.4">标准</option><option value="1.6">舒适</option><option value="1.8">宽松</option><option value="2">非常宽松</option></select></div><div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 10px;"><button id="saveSettings"style="padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">保存</button><button id="closeSettings"style="padding: 8px 16px; background-color: #f44336; color: white; border: none; border-radius: 4px; cursor: pointer;">关闭</button></div></div><div class="container"><div class="editor-section"><input type="text"id="fileName"placeholder="文件名"><div class="content-wrapper"><textarea id="content"placeholder="输入内容..."></textarea><span id="wordCount"></span><div id="progressBar"></div></div></div><div class="log-section"><div class="log-header"><h2>日志</h2><button class="toggle-log">▼</button></div><div class="log-content"id="logContent"><div id="log"class="log"></div><button id="clearLog">清空日志</button></div></div></div><!--JavaScript代码移至body底部以确保DOM完全加载--><script src="../js/indexeddb-helper.js"></script><script src="../js/settings-handler.js"></script><script src="../js/word-draft.js"></script><script>document.addEventListener('DOMContentLoaded',function(){const settingsToggle=document.getElementById('settingsToggle');const settingsPanel=document.querySelector('.settings');const settingsOverlay=document.getElementById('settingsOverlay');const closeSettings=document.getElementById('closeSettings');const saveSettings=document.getElementById('saveSettings');const themeSelect=document.getElementById('theme');const fontSizeSelect=document.getElementById('fontSize');const lineHeightSelect=document.getElementById('lineHeight');if(settingsToggle&&settingsPanel&&settingsOverlay){settingsToggle.addEventListener('click',function(){settingsPanel.style.display='flex';settingsOverlay.style.display='block'})}if(closeSettings&&settingsPanel&&settingsOverlay){closeSettings.addEventListener('click',function(){settingsPanel.style.display='none';settingsOverlay.style.display='none'})}if(settingsOverlay&&settingsPanel){settingsOverlay.addEventListener('click',function(){settingsPanel.style.display='none';settingsOverlay.style.display='none'})}if(saveSettings&&themeSelect&&fontSizeSelect&&lineHeightSelect&&window.saveSettings){saveSettings.addEventListener('click',function(){const settings={theme:themeSelect.value,fontSize:fontSizeSelect.value,lineHeight:lineHeightSelect.value};window.saveSettings(settings);settingsPanel.style.display='none';settingsOverlay.style.display='none'})}});</script></body></html>
